---
const options = {
  type: [
    {
      value: 'mesa-espiral',
      label: 'Mesa Espiral',
      icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M4 2h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm0 2v14h16V4H4zm1 1h14v5H5V5zM7 13v3h2v-3H7zm4 0v3h2v-3h-2zm4 0v3h2v-3h-2z"/></svg>',
    },
    {
      value: 'mesa-triangular',
      label: 'Mesa Triangular',
      icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M3 4v16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1zm1 1h16v14H4V5zm1 2v10h14V7H5zm3 1h8v1H8V8zm0 2h8v1H8v-1z"/></svg>',
    },
    {
      value: 'pared-revista',
      label: 'Pared Revista',
      icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M3 4v16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1zm1 1h16v14H4V5zm1 2v10h14V7H5zm3 1h8v1H8V8zm0 2h8v1H8v-1z"/></svg>',
    },
    {
      value: 'pared-espiral',
      label: 'Pared Espiral',
      icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M3 4v16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1zm1 1h16v14H4V5zm1 2v10h14V7H5zm3 1h8v1H8V8zm0 2h8v1H8v-1z"/></svg>',
    },
  ],
  size: {
    'mesa-espiral': ['21x10cm', '15x15cm'],
    'mesa-triangular': ['A5', '25x15cm'],
    'pared-espiral': ['24x34cm', '34x24cm'],
    'pared-revista': ['34x48cm'],
  },
  quantity: [50, 100, 200, 500, 1000]  // Cantidades disponibles
};
---

<head>
  <!-- Importar los estilos desde el CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.83/dist/themes/light.css">
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.83/dist/shoelace.js"></script>
</head>

<section id="form-section" class="p-6 bg-white shadow-lg rounded-lg w-full max-w-6xl mx-auto">
  <h2 class="text-2xl font-bold mb-4 text-center">Configura tu Calendario</h2>

  <form id="calendar-form" class="grid grid-cols-1 sm:grid-cols-2 gap-6 w-full" method="POST">
    <!-- Nombre con SVG -->
    <div class="relative w-full">
      <sl-input label="Nombre" name="nombre" required class="w-full rounded-lg">
        <svg slot="prefix" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4z"/></svg>
      </sl-input>
    </div>

    <!-- Email con SVG -->
    <div class="relative w-full">
      <sl-input label="Email" name="email" type="email" required class="w-full rounded-lg">
        <svg slot="prefix" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm8 2l-4 3 4 3 4-3-4-3z"/></svg>
      </sl-input>
    </div>

    <!-- Teléfono (opcional) con SVG -->
    <div class="relative w-full">
      <sl-input label="Teléfono" name="telefono" type="tel" class="w-full rounded-lg">
        <svg slot="prefix" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M6 2h12c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2zm12 4H6v12h12V6z"/></svg>
      </sl-input>
    </div>

    <!-- Empresa (opcional) con SVG -->
    <div class="relative w-full">
      <sl-input label="Empresa" name="empresa" class="w-full rounded-lg">
        <svg slot="prefix" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M4 2h16v16H4V2zm2 2v12h12V4H6zM7 7h10v2H7V7zm0 4h10v2H7v-2z"/></svg>
      </sl-input>
    </div>

    <!-- Tipo de Calendario con botones redondeados -->
    <div class="col-span-2">
      <label for="tipoCalendario" class="block text-sm font-medium text-gray-700 mb-2">Tipo de Calendario</label>
      <div id="tipoCalendario" class="flex gap-4">
        {options.type.map(option => (
          <button
            type="button"
            class="calendar-btn py-2 px-4 rounded-full border border-gray-300 hover:bg-green-100 focus:outline-none flex items-center gap-2"
            data-value={option.value}
          >
            <span set:html={option.icon}></span>
            {option.label}
          </button>
        ))}
      </div>
      <input type="hidden" name="tipoCalendario" id="tipoCalendario-input" required />
    </div>

    <!-- Tamaño dinámico según el tipo de calendario -->
    <div class="col-span-2">
      <label for="tamaño" class="block text-sm font-medium text-gray-700 mb-2">Tamaño</label>
      <div id="tamaño" class="flex gap-4"></div>
      <input type="hidden" name="tamaño" id="tamaño-input" required />
    </div>

    <!-- Cantidad -->
    <div class="col-span-2">
      <label for="cantidad" class="block text-sm font-medium text-gray-700 mb-2">Cantidad</label>
      <div id="cantidad" class="flex gap-2">
        {options.quantity.map(qty => (
          <button
            type="button"
            class="quantity-btn py-2 px-4 rounded-full border border-gray-300 hover:bg-green-100 focus:outline-none"
            data-value={qty}
          >
            {qty}
          </button>
        ))}
      </div>
      <input type="hidden" name="cantidad" id="cantidad-input" required />
    </div>

    <!-- Aceptación de política de privacidad -->
    <sl-checkbox name="politicaPrivacidad" required class="w-full col-span-2">Acepto la política de privacidad</sl-checkbox>
  </form>

  <!-- Botón de Envío -->
  <div class="mt-4">
    <sl-button variant="primary" type="submit" class="w-full" form="calendar-form">Solicitar presupuesto</sl-button>
  </div>
</section>

<script type="module" client:load>
  const tipoCalendario = document.getElementById('tipoCalendario');
  const tipoCalendarioInput = document.getElementById('tipoCalendario-input');
  const tamañoContainer = document.getElementById('tamaño');
  const tamañoInput = document.getElementById('tamaño-input');

  const sizeOptions = {
    'mesa-espiral': ['21x10cm', '15x15cm'],
    'mesa-triangular': ['A5', '25x15cm'],
    'pared-espiral': ['24x34cm', '34x24cm'],
    'pared-revista': ['34x48cm'],
  };

  const cantidadBtns = document.querySelectorAll('.quantity-btn');
  const cantidadInput = document.getElementById('cantidad-input');

  const calendarBtns = document.querySelectorAll('.calendar-btn');

  // Manejar la selección de tipo de calendario
  calendarBtns.forEach(button => {
    button.addEventListener('click', () => {
      calendarBtns.forEach(btn => btn.classList.remove('bg-green-500', 'text-white'));
      button.classList.add('bg-green-500', 'text-white');

      tipoCalendarioInput.value = button.getAttribute('data-value');
      const selectedType = button.getAttribute('data-value');
      const sizes = sizeOptions[selectedType];
      
      tamañoContainer.innerHTML = '';
      sizes.forEach((size) => {
        const sizeBtn = document.createElement('button');
        sizeBtn.classList.add('size-btn', 'py-2', 'px-4', 'rounded-full', 'border', 'border-gray-300', 'hover:bg-green-100', 'focus:outline-none');
        sizeBtn.textContent = size;
        sizeBtn.dataset.value = size;
        tamañoContainer.appendChild(sizeBtn);

        sizeBtn.addEventListener('click', () => {
          document.querySelectorAll('.size-btn').forEach(btn => btn.classList.remove('bg-green-500', 'text-white'));
          sizeBtn.classList.add('bg-green-500', 'text-white');
          tamañoInput.value = size;
        });
      });
    });
  });

  // Manejar la selección de cantidad
  cantidadBtns.forEach(button => {
    button.addEventListener('click', () => {
      cantidadBtns.forEach(btn => btn.classList.remove('bg-green-500', 'text-white'));
      button.classList.add('bg-green-500', 'text-white');

      cantidadInput.value = button.getAttribute('data-value');
    });
  });
</script>
