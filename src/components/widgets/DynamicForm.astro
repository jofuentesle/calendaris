---
const options = {
  type: [
    {
      value: 'mesa-espiral',
      label: 'Mesa Espiral',
    },
    {
      value: 'mesa-triangular',
      label: 'Mesa Triangular',
    },
    {
      value: 'pared-revista',
      label: 'Pared Revista',
    },
    {
      value: 'pared-espiral',
      label: 'Pared Espiral',
    },
  ],
  size: {
    'mesa-espiral': ['21x10cm', '15x15cm'],
    'mesa-triangular': ['A5', '25x15cm'],
    'pared-espiral': ['24x34cm', '34x24cm'],
    'pared-revista': ['34x48cm'],
  },
  quantity: [50, 100, 200, 500, 1000], // Cantidades disponibles
};
---
<head>
  <style>
    /* Clase de selección para todos los botones */
    .selected {
      border: 2px solid #007BFF;
      color: #007BFF;
      background-color: transparent;
    }

    /* Estilos generales para botones */
    .size-btn, .quantity-btn, .calendar-btn {
      transition: border-color 0.3s ease, color 0.3s ease;
    }

    .size-btn:hover, .quantity-btn:hover, .calendar-btn:hover {
      border-color: #0056b3;
    }

    .form-btn {
      display: block;
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #ccc;
      border-radius: 9999px;
      text-align: center;
      background-color: white;
      transition: border-color 0.3s ease, color 0.3s ease;
    }

    .form-btn:hover {
      border-color: #007BFF;
    }

    /* Distribuir el formulario de contacto en una columna para pantallas pequeñas */
    .contact-info {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      width: 100%;
    }

    /* Para pantallas mayores de 768px, mostrar en dos columnas */
    @media (min-width: 768px) {
      .contact-info {
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;
      }
    }

    /* Ocultar las medidas inicialmente */
    .size-container {
      display: none;
    }

    /* Mostrar las medidas seleccionadas */
    .show {
      display: flex;
    }
  </style>
</head>

<body>
  <section id="form-section" class="p-6 bg-white shadow-lg rounded-lg w-full max-w-6xl mx-auto">
    <h2 class="text-2xl font-bold mb-4 text-center">Configura tu Calendario</h2>

    <div class="contact-info-container">
      <form id="calendar-form" class="contact-info" method="POST">
        <fieldset class="contact-block">
          <!-- Nombre -->
          <div class="relative w-full">
            <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre *</label>
            <input id="nombre" name="nombre" required placeholder="Introduce tu nombre" class="form-btn">
          </div>

          <!-- Email -->
          <div class="relative w-full">
            <label for="email" class="block text-sm font-medium text-gray-700">Email *</label>
            <input id="email" name="email" type="email" required placeholder="Introduce tu email" class="form-btn">
          </div>

          <!-- Teléfono -->
          <div class="relative w-full">
            <label for="telefono" class="block text-sm font-medium text-gray-700">Teléfono</label>
            <input id="telefono" name="telefono" type="tel" placeholder="Introduce tu teléfono" class="form-btn">
          </div>

          <!-- Empresa -->
          <div class="relative w-full">
            <label for="empresa" class="block text-sm font-medium text-gray-700">Empresa</label>
            <input id="empresa" name="empresa" placeholder="Introduce tu empresa" class="form-btn">
          </div>
        </fieldset>  
        <!-- Tipo de Calendario con botones seleccionables -->
        <div class="col-span-2 text-center">
          <label for="tipoCalendario" class="block text-sm font-bold text-gray-700 mb-2">Tipo de Calendario*</label>
          <div id="tipoCalendario" class="flex justify-center gap-4 flex-wrap">
            <button type="button" class="calendar-btn py-2 px-4 rounded-full border border-gray-300" data-value="mesa-espiral">Mesa Espiral</button>
            <button type="button" class="calendar-btn py-2 px-4 rounded-full border border-gray-300" data-value="mesa-triangular">Mesa Triangular</button>
            <button type="button" class="calendar-btn py-2 px-4 rounded-full border border-gray-300" data-value="pared-revista">Pared Revista</button>
            <button type="button" class="calendar-btn py-2 px-4 rounded-full border border-gray-300" data-value="pared-espiral">Pared Espiral</button>
          </div>
          <input type="hidden" name="tipoCalendario" id="tipoCalendario-input" required />
        </div>

        <!-- Tamaño dinámico con valor por defecto, todos creados en el DOM -->
        <div class="col-span-2 text-center">
          <label for="tamaño" class="block text-sm font-bold text-gray-700 mb-2">Tamaño*</label>

          <!-- Contenedor de medidas por cada tipo de calendario -->
          <div id="tamaño" class="size-container mesa-espiral flex justify-center gap-4 flex-wrap">
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">21x10cm</button>
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">15x15cm</button>
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">21x15cm</button>
          </div>

          <div class="size-container mesa-triangular flex justify-center gap-4 flex-wrap">
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">21x10cm</button>
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">15x15cm</button>
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">21x15cm</button>
          </div>

          <div class="size-container pared-espiral flex justify-center gap-4 flex-wrap">
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">33x23 cm cerrado</button>
          </div>

          <div class="size-container pared-revista flex justify-center gap-4 flex-wrap">
            <button type="button" class="size-btn py-2 px-4 rounded-full border border-gray-300">34x48cm</button>
          </div>

          <input type="hidden" name="tamaño" id="tamaño-input" required />
        </div>

        <!-- Cantidad con selección destacada -->
        <div class="col-span-2 text-center">
          <label for="cantidad" class="block text-sm font-bold text-gray-700 mb-2">Cantidad *</label>
          <div id="cantidad" class="flex justify-center gap-2 flex-wrap">
            <button type="button" class="quantity-btn py-2 px-4 rounded-full border border-gray-300" data-value="50">50</button>
            <button type="button" class="quantity-btn py-2 px-4 rounded-full border border-gray-300" data-value="100">100</button>
            <button type="button" class="quantity-btn py-2 px-4 rounded-full border border-gray-300" data-value="200">200</button>
            <button type="button" class="quantity-btn py-2 px-4 rounded-full border border-gray-300" data-value="500">500</button>
            <button type="button" class="quantity-btn py-2 px-4 rounded-full border border-gray-300" data-value="1000">1000</button>
          </div>
          <input type="hidden" name="cantidad" id="cantidad-input" required />
        </div>

        <!-- Aceptación de política de privacidad -->
        <sl-checkbox name="politicaPrivacidad" required class="w-full col-span-2">Acepto la política de privacidad *</sl-checkbox>

      </form>
      </div>
  </section>

  <!-- Script para interactividad -->
  <script type="module">
    const tipoCalendarioInput = document.getElementById('tipoCalendario-input');
    const tamañoInput = document.getElementById('tamaño-input');
    const cantidadInput = document.getElementById('cantidad-input');
    const calendarBtns = document.querySelectorAll('.calendar-btn');
    const sizeContainers = document.querySelectorAll('.size-container');
    const ctaButton = document.getElementById('cta-button');

    // Manejar la selección de tipo de calendario y mostrar las medidas correspondientes
    calendarBtns.forEach(button => {
      button.addEventListener('click', () => {
        // Quitar la clase 'selected' de los botones previos
        calendarBtns.forEach(btn => btn.classList.remove('selected'));
        button.classList.add('selected');

        // Guardar el tipo de calendario seleccionado
        tipoCalendarioInput.value = button.getAttribute('data-value');

        // Ocultar todas las medidas y mostrar solo la correspondiente
        sizeContainers.forEach(container => container.classList.remove('show'));
        document.querySelector(`.${button.getAttribute('data-value')}`).classList.add('show');
      });
    });

    // Manejar la selección de cantidad
    document.querySelectorAll('.quantity-btn').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.quantity-btn').forEach(btn => btn.classList.remove('selected'));
        button.classList.add('selected');
        cantidadInput.value = button.getAttribute('data-value');
      });
    });

    // Manejar el envío al hacer clic en el botón CTA
    ctaButton.addEventListener('click', (event) => {
      event.preventDefault();
      const nombre = document.getElementById('nombre').value;
      const email = document.getElementById('email').value;
      const telefono = document.getElementById('telefono').value;
      const empresa = document.getElementById('empresa').value;
      const tipoCalendario = tipoCalendarioInput.value;
      const tamaño = tamañoInput.value;
      const cantidad = cantidadInput.value;

      console.log({
        nombre,
        email,
        telefono,
        empresa,
        tipoCalendario,
        tamaño,
        cantidad,
      });
    });

    // Delegación de eventos para las medidas
    sizeContainers.forEach(container => {
      container.addEventListener('click', (event) => {
        if (event.target.classList.contains('size-btn')) {
          container.querySelectorAll('.size-btn').forEach(btn => btn.classList.remove('selected'));
          event.target.classList.add('selected');
          tamañoInput.value = event.target.textContent;
        }
      });
    });
  </script>
</body>
