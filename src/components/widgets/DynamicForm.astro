---
const options = {
  type: [
    {
      value: 'mesa-espiral',
      label: 'Mesa Espiral',
    },
    {
      value: 'mesa-triangular',
      label: 'Mesa Triangular',
    },
    {
      value: 'pared-revista',
      label: 'Pared Revista',
    },
    {
      value: 'pared-espiral',
      label: 'Pared Espiral',
    },
  ],
  size: {
    'mesa-espiral': ['21x10cm', '15x15cm'],
    'mesa-triangular': ['A5', '25x15cm'],
    'pared-espiral': ['24x34cm', '34x24cm'],
    'pared-revista': ['34x48cm'],
  },
  quantity: [50, 100, 200, 500, 1000]  // Cantidades disponibles
};
---

<head>
  <!-- Importar los estilos desde el CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.83/dist/themes/light.css">
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.83/dist/shoelace.js"></script>
</head>

<section id="form-section" class="p-6 bg-white shadow-lg rounded-lg w-full max-w-6xl mx-auto">
  <h2 class="text-2xl font-bold mb-4 text-center">Configura tu Calendario</h2>

  <form id="calendar-form" class="grid grid-cols-1 sm:grid-cols-2 gap-6 w-full" method="POST">
    <!-- Nombre con validación obligatoria -->
    <div class="relative w-full">
      <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre *</label>
      <sl-input id="nombre" name="nombre" required placeholder="Introduce tu nombre" class="w-full rounded-lg"></sl-input>
    </div>

    <!-- Email con validación obligatoria -->
    <div class="relative w-full">
      <label for="email" class="block text-sm font-medium text-gray-700">Email *</label>
      <sl-input id="email" name="email" type="email" required placeholder="Introduce tu email" class="w-full rounded-lg"></sl-input>
    </div>

    <!-- Teléfono (opcional) -->
    <div class="relative w-full">
      <label for="telefono" class="block text-sm font-medium text-gray-700">Teléfono</label>
      <sl-input id="telefono" name="telefono" type="tel" placeholder="Introduce tu teléfono" class="w-full rounded-lg"></sl-input>
    </div>

    <!-- Empresa (opcional) -->
    <div class="relative w-full">
      <label for="empresa" class="block text-sm font-medium text-gray-700">Empresa</label>
      <sl-input id="empresa" name="empresa" placeholder="Introduce el nombre de tu empresa" class="w-full rounded-lg"></sl-input>
    </div>

    <!-- Tipo de Calendario con botones redondeados -->
    <div class="col-span-2">
      <label for="tipoCalendario" class="block text-sm font-medium text-gray-700 mb-2">Tipo de Calendario *</label>
      <div id="tipoCalendario" class="flex gap-4 flex-wrap">
        {options.type.map(option => (
          <button
            type="button"
            class="calendar-btn py-2 px-4 rounded-full border border-gray-300 hover:bg-green-100 focus:bg-green-500 focus:text-white flex items-center gap-2"
            data-value={option.value}
          >
            {option.label}
          </button>
        ))}
      </div>
      <input type="hidden" name="tipoCalendario" id="tipoCalendario-input" required />
    </div>

    <!-- Tamaño dinámico según el tipo de calendario -->
    <div class="col-span-2">
      <label for="tamaño" class="block text-sm font-medium text-gray-700 mb-2">Tamaño *</label>
      <div id="tamaño" class="flex gap-4 flex-wrap"></div>
      <input type="hidden" name="tamaño" id="tamaño-input" required />
    </div>

    <!-- Cantidad -->
    <div class="col-span-2">
      <label for="cantidad" class="block text-sm font-medium text-gray-700 mb-2">Cantidad *</label>
      <div id="cantidad" class="flex gap-2 flex-wrap">
        {options.quantity.map(qty => (
          <button
            type="button"
            class="quantity-btn py-2 px-4 rounded-full border border-gray-300 hover:bg-green-100 focus:bg-green-500 focus:text-white"
            data-value={qty}
          >
            {qty}
          </button>
        ))}
      </div>
      <input type="hidden" name="cantidad" id="cantidad-input" required />
    </div>

    <!-- Aceptación de política de privacidad -->
    <sl-checkbox name="politicaPrivacidad" required class="w-full col-span-2">Acepto la política de privacidad *</sl-checkbox>
  </form>

  <!-- Botón de Envío -->
  <div class="mt-4">
    <sl-button variant="primary" type="submit" class="w-full" form="calendar-form">Solicitar presupuesto</sl-button>
  </div>
</section>

<script type="module" client:load>
  const tipoCalendario = document.getElementById('tipoCalendario');
  const tipoCalendarioInput = document.getElementById('tipoCalendario-input');
  const tamañoContainer = document.getElementById('tamaño');
  const tamañoInput = document.getElementById('tamaño-input');

  const sizeOptions = {
    'mesa-espiral': ['21x10cm', '15x15cm'],
    'mesa-triangular': ['A5', '25x15cm'],
    'pared-espiral': ['24x34cm', '34x24cm'],
    'pared-revista': ['34x48cm'],
  };

  const cantidadBtns = document.querySelectorAll('.quantity-btn');
  const cantidadInput = document.getElementById('cantidad-input');
  const calendarBtns = document.querySelectorAll('.calendar-btn');

  // Manejar la selección de tipo de calendario
  calendarBtns.forEach(button => {
    button.addEventListener('click', () => {
      calendarBtns.forEach(btn => btn.classList.remove('bg-green-500', 'text-white'));
      button.classList.add('bg-green-500', 'text-white');

      tipoCalendarioInput.value = button.getAttribute('data-value');
      const selectedType = button.getAttribute('data-value');
      const sizes = sizeOptions[selectedType];
      
      tamañoContainer.innerHTML = '';
      sizes.forEach((size) => {
        const sizeBtn = document.createElement('button');
        sizeBtn.classList.add('size-btn', 'py-2', 'px-4', 'rounded-full', 'border', 'border-gray-300', 'hover:bg-green-100', 'focus:outline-none');
        sizeBtn.textContent = size;
        sizeBtn.dataset.value = size;
        tamañoContainer.appendChild(sizeBtn);

        sizeBtn.addEventListener('click', () => {
          document.querySelectorAll('.size-btn').forEach(btn => btn.classList.remove('bg-green-500', 'text-white'));
          sizeBtn.classList.add('bg-green-500', 'text-white');
          tamañoInput.value = size;
        });
      });
    });
  });

  // Manejar la selección de cantidad
  cantidadBtns.forEach(button => {
    button.addEventListener('click', () => {
      cantidadBtns.forEach(btn => btn.classList.remove('bg-green-500', 'text-white'));
      button.classList.add('bg-green-500', 'text-white');

      cantidadInput.value = button.getAttribute('data-value');
    });
  });
</script>



